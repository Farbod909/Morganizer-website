<!DOCTYPE html>
<html lang="en">

  <head>
  	<meta charset="utf-8" />
  	<meta http-equiv="X-UA-Compatible" content="IE=edge">
  	<meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Morganizer</title>
  	<link href='http://fonts.googleapis.com/css?family=Open+Sans:700,300,400' rel='stylesheet' type='text/css'>
  	<link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
  	<link href='http://fonts.googleapis.com/css?family=Exo+2:400,300,200' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="css/index.css" type="text/css">
    <script type="text/javascript">
      if(localStorage.userToken == undefined){
        location="login.html";
      }
    </script>
    <script src="js/spin.js"></script>
    <script type="text/javascript">
      // var loadingImg = new Image();
      // loadingImg.className = "spinner"
      var loadingDiv = document.createElement("div");
      loadingDiv.className = "loading_circle";
      loadingDiv.id = "loading_circle";
      // loadingImg.onload = function(){
      //   loadingDiv.appendChild(loadingImg)
      // }
      // loadingImg.src="images/ajax-loader.gif";
    </script>
  </head>
  <body>
    <!-- NAVIGATION BAR -->
    <div class="navigation_bar">
      <ul id="navbar_list">
        <li class="navbar_item"><input type="text" placeholder="search drive" class="searchbox"></input></li>
        <li class="navbar_item">
          <div id="categories">
           <ul>
            <li class="navbar_item navbar_link" id="home_link" onclick="location='index.html'"><span class="glyphicon glyphicon-home"></span><div class="hborder"></div></li><!--
            --><li class="navbar_item navbar_link" id="chat_link" onclick="location='chat.html'"><span class="glyphicon glyphicon-comment"></span><div class="border"></div></li><!--
            --><li class="navbar_item navbar_link active" id="drive_link" onclick="location='drive.html'"><span class="glyphicon glyphicon-hdd"></span><div class="border"></div></li><!--
            --><li class="navbar_item navbar_link" id="cal_link" onclick="location='cal.html'"><span class="glyphicon glyphicon-calendar"></span><div class="border"></div></li><!--
            --><li class="navbar_item navbar_link" id="settings_link" onclick="location='settings.html'"><span class="glyphicon glyphicon-cog"></span><div class="border"></div></li>
           </ul>
          </div>
        </li>
        <li class="navbar_item" id="notif_button"><span class="glyphicon glyphicon-inbox"></span></li>
        <li class="navbar_item" id="profile_id"><img id="small_prof_pic" src="./images/user.jpg"></img></li>
        <li class="navbar_item" id="profile_name"><span id="name_link"></span></li>
      </ul>
    </div>
    <div class="triangle_thing_notif hidden"></div>
    <div class="triangle_thing_prof hidden"></div>
    <div id="notif_drop" class="hidden">
      <ul>
        <li class="notif_list_item">hey</li>
        <li class="notif_list_item">hi</li>
        <li class="notif_list_item">ho</li>
      </ul>
    </div>
    <div id="prof_drop" class="hidden">
      <ul>
        <li class="notif_list_item" onclick="location='profile.html';">View Profile</li>
        <li class="notif_list_item" id="logout_button">Log Out</li>
      </ul>
    </div>
    <div id="darken" class="hidden"></div>
    <!-- END OF NAVIGATION BAR -->

    <!-- BODY -->
    <!-- <div class="loading_circle" id="loading_circle"></div> -->
    <div class="container-fluid documents_list hidden">
      <div class="row">
        <div style="z-index:1;" class="col-lg-2 col-md-3 col-sm-4 col-xs-6 doc_frame word_doc">
          <img src="./images/doc3.jpg" class="doc_preview" />
          <span class="doc_title">Word Document 3</span>
        </div>
        <div style="z-index:1;" class="col-lg-2 col-md-3 col-sm-4 col-xs-6 doc_frame word_doc">
          <img src="./images/doc4.jpg" class="doc_preview" />
          <span class="doc_title">Word Document 4</span>
        </div>
        <div style="z-index:1;" class="col-lg-2 col-md-3 col-sm-4 col-xs-6 doc_frame pdf_doc">
          <img src="./images/doc5.jpg" class="doc_preview" />
          <span class="doc_title">PDF Document 5</span>
        </div>
        <div style="z-index:1;" class="col-lg-2 col-md-3 col-sm-4 col-xs-6 doc_frame excel_doc">
          <img src="./images/doc6.jpg" class="doc_preview" />
          <span class="doc_title">Excel Spreadsheet 6</span>
        </div>
        <div style="z-index:1;" class="col-lg-2 col-md-3 col-sm-4 col-xs-6 doc_frame keynote_doc">
          <img src="./images/doc7.jpg" class="doc_preview" />
          <span class="doc_title">Powerpoint Document 7</span>
        </div>
        <div style="z-index:1;" class="col-lg-2 col-md-3 col-sm-4 col-xs-6 doc_frame default_doc">
          <img src="./images/doc8.jpg" class="doc_preview" />
          <span class="doc_title">Unknown Document 8</span>
        </div>
        <div style="z-index:1;" class="col-lg-2 col-md-3 col-sm-4 col-xs-6 doc_frame image_doc">
          <img src="./images/cliff.jpg" class="doc_preview image_preview"/>
          <span class="doc_title">Cliff Image</span>
        </div>
        <div style="z-index:1;" class="col-lg-2 col-md-3 col-sm-4 col-xs-6 doc_frame word_doc">
          <img src="./images/doc9.jpg" class="doc_preview" />
          <span class="doc_title">Word Document 9</span>
        </div>
        <div style="z-index:1;" class="col-lg-2 col-md-3 col-sm-4 col-xs-6 doc_frame word_doc">
          <img src="./images/doc10.jpg" class="doc_preview" />
          <span class="doc_title">Word Document 10</span>
        </div>
        <div style="z-index:1;" class="col-lg-2 col-md-3 col-sm-4 col-xs-6 doc_frame pdf_doc">
          <img src="./images/doc11.jpg" class="doc_preview" />
          <span class="doc_title">PDF Document 11</span>
        </div>
	      <div style="z-index:1;" class="col-lg-2 col-md-3 col-sm-4 col-xs-6 doc_frame word_doc">
          <img src="./images/doc12.jpg" class="doc_preview" />
          <span class="doc_title">Word Document 12</span>
        </div>
        <div style="z-index:1;" class="col-lg-2 col-md-3 col-sm-4 col-xs-6 doc_frame image_doc">
          <img src="./images/sample1.jpg" class="doc_preview image_preview"/>
          <span class="doc_title">Image 1</span>
        </div>
        <div style="z-index:1;" class="col-lg-2 col-md-3 col-sm-4 col-xs-6 doc_frame image_doc">
          <img src="./images/sample2.jpg" class="doc_preview image_preview"/>
          <span class="doc_title">Image 2</span>
        </div>
        <div style="z-index:1;" class="col-lg-2 col-md-3 col-sm-4 col-xs-6 doc_frame image_doc">
          <img src="./images/sample3.jpg" class="doc_preview image_preview"/>
          <span class="doc_title">Image 3</span>
        </div>
        <div style="z-index:1;" class="col-lg-2 col-md-3 col-sm-4 col-xs-6 doc_frame image_doc">
          <img src="./images/sample4.jpg" class="doc_preview image_preview"/>
          <span class="doc_title">Image 4</span>
        </div>
      </div>
    </div>
    <!-- END OF BODY -->

    <!-- LEFTBAR -->
    <div class="leftbar">
      <ul>
        <li class="drive_name"><span id="make_drive" class="glyphicon glyphicon-plus"></span>Add Document</li>
        <li class="drive_name"><a href="#"><img id="small_prof_pic" src="./images/doc.png" class="doc_category_icon"></img></a>All Documents</li>
        <li class="drive_name"><a href="#"><img id="small_prof_pic" src="./images/doc.png" class="doc_category_icon"></img></a>Subdivision Documents</li>
        <li class="drive_name"><a href="#"><img id="small_prof_pic" src="./images/doc.png" class="doc_category_icon"></img></a>Personal Documents</li>
        <li class="drive_name"><a href="#"><img id="small_prof_pic" src="./images/doc.png" class="doc_category_icon"></img></a>Tagged Documents</li>
        <li class="drive_name"><a href="#"><img id="small_prof_pic" src="./images/doc.png" class="doc_category_icon"></img></a>Shared Documents</li>
      </ul>
    </div>
    <!-- END OF LEFTBAR -->

    <script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
	<script src="js/color-thief.js"></script>
    <script type="text/javascript" src="js/navbar.js"></script>
	<script type="text/javascript" src="js/hex.js"></script>
    <script type="text/javascript">
		$(document).ready(function(){
      document.body.appendChild(loadingDiv)

      var opts = {
        lines: 13 // The number of lines to draw
      , length: 0 // The length of each line
      , width: 20 // The line thickness
      , radius: 42 // The radius of the inner circle
      , scale: .5 // Scales overall size of the spinner
      , corners: 1 // Corner roundness (0..1)
      , color: 'orange' // #rgb or #rrggbb or array of colors
      , opacity: 0.25 // Opacity of the lines
      , rotate: 0 // The rotation offset
      , direction: 1 // 1: clockwise, -1: counterclockwise
      , speed: 1 // Rounds per second
      , trail: 60 // Afterglow percentage
      , fps: 20 // Frames per second when using setTimeout() as a fallback for CSS
      , zIndex: 2e9 // The z-index (defaults to 2000000000)
      , className: 'spinner' // The CSS class to assign to the spinner
      , top: '50%' // Top position relative to parent
      , left: '50%' // Left position relative to parent
      , shadow: false // Whether to render a shadow
      , hwaccel: false // Whether to use hardware acceleration
      , position: 'absolute' // Element positioning
      }
      var target = loadingDiv
      spinner = new Spinner(opts).spin(target);

			$('.doc_frame').click(function(){
				alert( $(this).find(".doc_title").html() );
			});
			$(".doc_frame").mouseenter(function(){
				$(this).css("background-color", "#"+rgb2hex( $(this).css('backgroundColor') ).darkenHexColorBy(25)  );
			});
			$(".doc_frame").mouseleave(function(){
				$(this).css("background-color", "#"+rgb2hex( $(this).css('backgroundColor') ).lightenHexColorBy(25)  );
			});



		});
    $(window).load(function(){
      var img = new Array($(".image_preview").length);
      for( var i = 0 ; i<$(".image_preview").length ; i++ ){
        img[i] = document.createElement("img");
        img[i].src = $(".image_preview")[i].src;
        var n = 0
        img[i].onload = function () {
            var colorThief = new ColorThief();
            var color = colorThief.getColor(img[n]);
            $(".image_preview")[n].parentNode.style.backgroundColor = "rgb(" + color + ")";
            var r = color[0];
            var g = color[1];
            var b = color[2];
            var luma = 0.2126 * r + 0.7152 * g + 0.0722 * b;
            if (luma > 170) {
                $($(".image_preview")[n]).next().css( "color", "black" );
                // console.log($($(".image_preview")[n]).next());
            }
            n++;
        };
      }
      spinner.stop();
      $(".documents_list").fadeIn(400).removeClass("hidden")
      //$(loadingDiv).hide();

    });
    window.onunload = function(){};
    </script>
  </body>
</html>
